(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}const t=function(){function t(e,n,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.title=e,this.author=n,this.pages=a,this.read=r}var n,a;return n=t,(a=[{key:"info",value:function(){return"".concat(this.title," by ").concat(this.author,", ").concat(this.pages,", ").concat(this.read?"read":"not read yet")}}])&&e(n.prototype,a),t}();function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r="library";function o(){var e=localStorage.getItem(r);return e?JSON.parse(e,c):[]}function i(e){localStorage.setItem(r,JSON.stringify(e,s))}function c(e,n){return n&&"Book"===n.__type__?new t(n.title,n.author,n.pages,n.read):n}function s(e,r){return r instanceof t?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({__type__:"Book"},r):r}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=[new t("The Lord of the Rings","J.R.R. Tolkien",1e3,!1),new t("JS for Impatient Programmers","Axel Rauschmayer",200,!0),new t("Javascript AllongÃ© Six","Reg Braithwaite",400,!1)];const d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.library=t||u,this.storage=function(e){var t;try{t=window.localStorage;var n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}()}var n,a;return n=e,(a=[{key:"addBook",value:function(e){var n=e.title,a=e.author,r=e.pages,c=e.read;if(this.storage){var s=o();return s.push(new t(n,a,r,c)),void i(s)}this.library.push(new t(n,a,r,c))}},{key:"removeBook",value:function(e){if(this.storage){var t=o();return t.splice(e,1),void i(t)}this.library.splice(e,1)}},{key:"setBookReadStatus",value:function(e,t){if(this.storage){var n=o();return n[e].read=t,void i(n)}this.library[e].read=t}},{key:"getBooks",value:function(){return this.storage?o():this.library}}])&&l(n.prototype,a),e}();function h(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.library=t,this.newBookButton=document.getElementById("new-book-button"),this.newBookButton.addEventListener("click",this.handleNewBookClick.bind(this)),this.formOverlay=document.getElementById("form-overlay"),this.form=document.getElementById("book-form"),this.createButton=document.getElementById("create-button"),this.createButton.addEventListener("click",this.handleCreateClick.bind(this)),this.cancelButton=document.getElementById("cancel-button"),this.cancelButton.addEventListener("click",this.handleCancelClick.bind(this)),this.bookTable=document.getElementById("book-table"),this.bookTable.addEventListener("click",this.handleDeleteClick.bind(this)),this.bookTable.addEventListener("click",this.handleReadClick.bind(this)),this.init()}var t,n;return t=e,(n=[{key:"handleNewBookClick",value:function(){this.formOverlay.classList.remove("hide")}},{key:"handleCreateClick",value:function(e){e.preventDefault(),this.formOverlay.classList.add("hide");var t,n,a,r,o=(n=(t=new FormData(this.form)).get("title"),a=t.get("author"),r=Number.parseInt(t.get("pages"),10),{title:n,author:a,pages:Number.isNaN(r)?void 0:r,read:!!t.get("read")});this.library.addBook(o),this.updateBookTable()}},{key:"handleCancelClick",value:function(){this.form.reset(),this.formOverlay.classList.add("hide")}},{key:"handleDeleteClick",value:function(e){if(e.target.classList.contains("delete-button")){var t=parseInt(e.target.dataset.id,10);this.library.removeBook(t),this.updateBookTable()}}},{key:"handleReadClick",value:function(e){if(e.target.classList.contains("read-checkbox")){var t=parseInt(e.target.dataset.id,10),n=!!e.target.checked;this.library.setBookReadStatus(t,n),this.updateBookTable()}}},{key:"updateBookTable",value:function(){var e=this.library.getBooks().map((function(e,t){return"<tr>\n      <td>".concat(e.title,"</td>\n      <td>").concat(e.author,"</td>\n      <td>").concat(null!=e.pages?e.pages:"",'</td>\n      <td><input class="read-checkbox" type="checkbox" \n            data-id="').concat(t,'" \n            ').concat(e.read?"checked":"",'>\n      </td>\n      <td><button class="btn delete-button" type="button" data-id="').concat(t,'">Delete</button></td>\n    </tr>')})).join("");this.bookTable.tBodies[0].innerHTML=e}},{key:"init",value:function(){this.updateBookTable()}}])&&h(t.prototype,n),e}())(new d)})();
//# sourceMappingURL=main.js.map